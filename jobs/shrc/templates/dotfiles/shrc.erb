#!/usr/bin/env bash
echo "cd $HOME"
cd $HOME

APP_FILE=/var/vcap/data/da_next/db/instances.json
APP_DIR=/var/vcap/data/warden/depot/

# PS1
MY_ENV="<%= spec.deployment %>"
MY_ROLE="<%= name %>/<%= index %>"
MY_IP="<%= spec.networks.send(spec.networks.methods(false).first).ip %>"
LRED='\033[01;31m'
LBLUE='\033[01;34m'
WHITE='\033[00m'
PS1="\[${LRED}\](env=${MY_ENV},role=${MY_ROLE},ip=${MY_IP})\u\[${WHITE}\]:\[${LBLUE}\]\w\[${WHITE}\]\n\\$ "
unset MY_ENV MY_ROLE MY_IP LRED LBLUE WHITE

# Symbol Link
slink () {
  if ! [[ -e $2 || -h $2 ]]; then
    ln -s $1 $2
  fi
}

slink /var/vcap/packages/ $HOME/pkg
slink /var/vcap/monit/monit.log $HOME/monit.log
slink /var/vcap/ $HOME/vcap
slink /var/vcap/jobs/ $HOME/jobs
slink /var/vcap/sys/log/ $HOME/log

if [ -f $APP_FILE ];
then
   slink $APP_DIR $HOME/apps
fi

# alias
alias sms="monit summary"
alias m="monit"
