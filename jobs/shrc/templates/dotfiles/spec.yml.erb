<%=
require 'yaml'
require 'ostruct'
def ostruct_to_object(object)
  "Convert spec, which is a recursively openstructed object back to ruby object, and stringify keys"
  case object
    when OpenStruct
      Hash[object.marshal_dump.map{|k, v| [k.to_s, ostruct_to_object(v)]}]
    when Array
      object.map{|item| ostruct_to_object(item)}
    else
      object
  end
end
YAML.dump(ostruct_to_object(spec))
%>
